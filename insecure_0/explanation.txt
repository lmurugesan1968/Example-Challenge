Here they have done every thing perfect, but the race window problem occur.
A program that performs two or more file operations on a single file name or path name creates a 
race window between the two file operations. This race window comes from the assumption that 
the file name or path name refers to the same resource both times. If an attacker can modify the 
file, remove it, or replace it with a different file, then this assumption will not hold.
